const worldtomap=[2,0,-.00000000000000012246467991473532,-.00000000000000012246467991473532,0,-2,0,1,0],maptoworld=[.5,-.00000000000000003061616997868383,0,0,0,1,-.00000000000000003061616997868383,-.5,0],tilescale=1,mapzoomout=6;function fromLocationToLatLng(a,o,t){var n=worldtomap[3]*a.x+worldtomap[4]*a.y+worldtomap[5]*a.z+248,r=worldtomap[0]*a.x+worldtomap[1]*a.y+worldtomap[2]*a.z+6;return new L.LatLng(-(((128<<o)-n)/(1<<t)),r/(1<<t),a.y)}function fromLatLngToLocation(a,o,t,n){var r=(128<<t)+a.lat*(1<<n),m=a.lng*(1<<n),e=maptoworld[0]*m+maptoworld[1]*r+maptoworld[2]*o-3,p=maptoworld[6]*m+maptoworld[7]*r+maptoworld[8]*o+124;return{x:e,y:o,z:p}}const spawn=fromLocationToLatLng({x:2725,y:64,z:4153},1,6),map=L.map("map",{crs:L.CRS.Simple,zoom:6,attributionControl:!1}).setView([0,0]).flyTo([spawn.lat,spawn.lng],6),bounds=fromLocationToLatLng({x:6e3,y:64,z:6e3},1,6);var redmontMap=L.tileLayer("../images/Leaflet Maps/Redmont/{z}/{x}/{y}.png",{minZoom:2,maxZoom:7,bounds:[[0,0],[bounds.lat,bounds.lng]],noWrap:!0,unloadInvisibleTiles:!0,reuseTiles:!0}).addTo(map);async function getHeatmapData(a){return(await $.ajax({url:`data/heatmaps/${a}`,dataType:"json"})).map(a=>{let o=fromLocationToLatLng({x:a[0],y:64,z:a[1]},1,6);return[o.lat,o.lng,.01]})}!async function(){let a=await getHeatmapData("January 2023 Heatmap.txt"),o=await getHeatmapData("April 2023 Heatmap.txt");var t=L.heatLayer(a,{minOpacity:.05,max:.5,radius:20}),n=L.heatLayer(o,{minOpacity:.05,max:.5,radius:20});L.control.groupedLayers({"<img src='images/icons/logo.jpg' width = 25 />":redmontMap},{"<font size='+2'>Heatmaps</font>":{"<font size='+1'>January 2023</font>":t,"<font size='+1'>April 2023</font>":n}},{collapsed:!1}).addTo(map)}();
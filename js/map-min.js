const worldtomap=[2,0,-1.2246467991473532e-16,-1.2246467991473532e-16,0,-2,0,1,0],maptoworld=[.5,-3.061616997868383e-17,0,0,0,1,-3.061616997868383e-17,-.5,0];function fromLocationToLatLng(o,a,t){var n=worldtomap[3]*o.x+worldtomap[4]*o.y+worldtomap[5]*o.z+318,r=worldtomap[0]*o.x+worldtomap[1]*o.y+worldtomap[2]*o.z;return new L.LatLng(-((128<<a)-n)/(1<<t),r/(1<<t),o.y)}function fromLatLngToLocation(o,a,t,n){var r=(128<<t)+o.lat*(1<<n),m=o.lng*(1<<n),e=maptoworld[0]*m+maptoworld[1]*r+maptoworld[2]*a,p=maptoworld[6]*m+maptoworld[7]*r+maptoworld[8]*a+159;return{x:Math.round(e),y:Math.round(a),z:Math.round(p)}}const spawn=fromLocationToLatLng({x:2725,y:64,z:4153},1,6),map=L.map("map",{crs:L.CRS.Simple,zoom:6,attributionControl:!1}).setView([0,0]).flyTo([spawn.lat,spawn.lng],6),bounds=fromLocationToLatLng({x:6e3,y:64,z:6e3},1,6);var redmontMap=L.tileLayer("../images/Leaflet Maps/Redmont/{z}/{x}/{y}.png",{minZoom:0,maxZoom:8,bounds:[[0,0],[bounds.lat,bounds.lng]],maxNativeZoom:6,noWrap:!0,unloadInvisibleTiles:!0,reuseTiles:!0}).addTo(map);async function getHeatmapData(){return(await $.ajax({url:"data/heatmaps/Chestshop Heatmap.txt",dataType:"json"})).map(o=>{const a=fromLocationToLatLng({x:o[0],y:64,z:o[1]},1,6);return[a.lat,a.lng,.01]})}!async function(){const o=await getHeatmapData();var a=L.heatLayer(o,{minOpacity:.05,max:.5,radius:20}),t={"<img src='images/icons/logo.jpg' width = 25 />":redmontMap},n={"<font size='+1'>Heatmaps</font>":{"<img src='images/icons/block_world_heat.svg' width = 25 />":a}};L.control.groupedLayers(t,n,{collapsed:!1}).addTo(map)}();